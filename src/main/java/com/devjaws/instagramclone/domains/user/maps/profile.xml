<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd">
<mapper namespace="Profile">
    <insert id="insertProfile" parameterType="com.devjaws.instagramclone.domains.user.dtos.entities.ProfileEntity" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO profile(
            bio,
            picture,
            website,
            user_name
        )values(
            #{bio},
            #{picture},
            #{website},
            #{user_name}
        )
    </insert>
    <select id="viewProfile" parameterType="String" resultType="com.devjaws.instagramclone.domains.user.dtos.ProfileDTO" >
        SELECT
            p.picture,
            p.bio,
            p.website,
            u.username,
            u.firstName,
            u.lastName
        FROM
            profile as p
        INNER JOIN
            user as u
        ON
            p.user_name=u.username
        WHERE
            u.username=#{username}
    </select>
    <update id="updateProfile" parameterType="com.devjaws.instagramclone.domains.user.dtos.entities.ProfileEntity">
        UPDATE user SET bio=#{blo},picture=#{picture},website=#{website},user_name=#{user_name}
    </update>

</mapper>
